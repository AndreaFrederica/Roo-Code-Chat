/**
 * 网页版独立主题系统
 * 支持深色/浅色主题并跟随系统设置
 * 
 * 重要：此文件只在独立浏览器环境中通过 inject 方式加载（见 web-client-entry.tsx）
 * 为了避免影响VSCode环境，所有样式都通过 data-theme 属性限制应用范围
 * 不使用全局 @media (prefers-color-scheme) 以防止CSS规则在VSCode中泄露
 */

/* === 浅色主题 === */
[data-theme="light"] {
  --background: #ffffff !important;
  --foreground: #1e1e1e !important;
  --card: #ffffff !important;
  --card-foreground: #1e1e1e !important;
  --popover: #ffffff !important;
  --popover-foreground: #1e1e1e !important;
  --primary: #0078d4 !important;
  --primary-foreground: #ffffff !important;
  --secondary: #f3f2f1 !important;
  --secondary-foreground: #323130 !important;
  --muted: #f3f2f1 !important;
  --muted-foreground: #605e5c !important;
  --accent: #e1dfdd !important;
  --accent-foreground: #323130 !important;
  --destructive: #d13438 !important;
  --destructive-foreground: #ffffff !important;
  --border: #edebe9 !important;
  --input: #ffffff !important;
  --ring: #0078d4 !important;

  /* === VS Code 兼容变量（浅色） === */
  --vscode-editor-background: #ffffff !important;
  --vscode-editor-foreground: #1e1e1e !important;
  --vscode-font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif !important;
  --vscode-font-size: 14px !important;

  /* 按钮样式 */
  --vscode-button-background: #0078d4 !important;
  --vscode-button-foreground: #ffffff !important;
  --vscode-button-secondaryBackground: #f3f2f1 !important;
  --vscode-button-secondaryForeground: #323130 !important;
  --vscode-button-hoverBackground: #106ebe !important;

  /* 输入框样式 */
  --vscode-input-background: #ffffff !important;
  --vscode-input-foreground: #1e1e1e !important;
  --vscode-input-border: #c2c2c2 !important;

  /* 列表样式 */
  --vscode-list-hoverBackground: #e1dfdd !important;
  --vscode-list-hoverForeground: #323130 !important;
  --vscode-list-activeSelectionBackground: #0078d4 !important;
  --vscode-list-activeSelectionForeground: #ffffff !important;

  /* 状态颜色 */
  --vscode-errorForeground: #d13438 !important;
  --vscode-warning-foreground: #ff8c00 !important;
  --vscode-descriptionForeground: #605e5c !important;
  --vscode-disabledForeground: #a19f9d !important;

  /* 其他重要颜色 */
  --vscode-focusBorder: #0078d4 !important;
  --vscode-menu-background: #ffffff !important;
  --vscode-menu-foreground: #1e1e1e !important;
  --vscode-dropdown-background: #ffffff !important;
  --vscode-dropdown-foreground: #1e1e1e !important;
  --vscode-dropdown-border: #c2c2c2 !important;

  /* 代码块 */
  --vscode-textCodeBlock-background: #f3f2f1 !important;

  /* 图表颜色 */
  --vscode-charts-red: #d13438 !important;
  --vscode-charts-blue: #0078d4 !important;
  --vscode-charts-green: #107c10 !important;
  --vscode-charts-yellow: #ff8c00 !important;
  --vscode-charts-orange: #ff8c00 !important;

  /* Validation feedback */
  --vscode-inputValidation-infoBackground: #d6ecff !important;
  --vscode-inputValidation-infoBorder: #0078d4 !important;
  --vscode-inputValidation-warningBackground: #fff2cc !important;
  --vscode-inputValidation-warningBorder: #d7ba7d !important;

  /* Testing indicators */
  --vscode-testing-background: #e1f6d5 !important;

  /* 强制浅色主题标识 */
  --standalone-theme: light !important;
}

/* === 深色主题 === */
[data-theme="dark"] {
  --background: #1e1e1e !important;
  --foreground: #ffffff !important;
  --card: #252526 !important;
  --card-foreground: #ffffff !important;
  --popover: #252526 !important;
  --popover-foreground: #ffffff !important;
  --primary: #007acc !important;
  --primary-foreground: #ffffff !important;
  --secondary: #2d2d30 !important;
  --secondary-foreground: #cccccc !important;
  --muted: #3e3e42 !important;
  --muted-foreground: #9d9d9d !important;
  --accent: #094771 !important;
  --accent-foreground: #ffffff !important;
  --destructive: #f48771 !important;
  --destructive-foreground: #ffffff !important;
  --border: #3e3e42 !important;
  --input: #3c3c3c !important;
  --ring: #007acc !important;

  /* === VS Code 兼容变量（深色） === */
  --vscode-editor-background: #1e1e1e !important;
  --vscode-editor-foreground: #cccccc !important;
  --vscode-font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif !important;
  --vscode-font-size: 14px !important;

  /* 按钮样式 */
  --vscode-button-background: #0e639c !important;
  --vscode-button-foreground: #ffffff !important;
  --vscode-button-secondaryBackground: #3c3c3c !important;
  --vscode-button-secondaryForeground: #cccccc !important;
  --vscode-button-hoverBackground: #1177bb !important;

  /* 输入框样式 */
  --vscode-input-background: #3c3c3c !important;
  --vscode-input-foreground: #cccccc !important;
  --vscode-input-border: #3e3e42 !important;

  /* 列表样式 */
  --vscode-list-hoverBackground: #2a2d2e !important;
  --vscode-list-hoverForeground: #cccccc !important;
  --vscode-list-activeSelectionBackground: #094771 !important;
  --vscode-list-activeSelectionForeground: #ffffff !important;

  /* 状态颜色 */
  --vscode-errorForeground: #f48771 !important;
  --vscode-warning-foreground: #cca700 !important;
  --vscode-descriptionForeground: #9d9d9d !important;
  --vscode-disabledForeground: #6e6e6e !important;

  /* 其他重要颜色 */
  --vscode-focusBorder: #007fd4 !important;
  --vscode-menu-background: #252526 !important;
  --vscode-menu-foreground: #cccccc !important;
  --vscode-dropdown-background: #3c3c3c !important;
  --vscode-dropdown-foreground: #cccccc !important;
  --vscode-dropdown-border: #3e3e42 !important;

  /* 代码块 */
  --vscode-textCodeBlock-background: #2d2d30 !important;

  /* 图表颜色 */
  --vscode-charts-red: #f48771 !important;
  --vscode-charts-blue: #75beff !important;
  --vscode-charts-green: #4ec9b0 !important;
  --vscode-charts-yellow: #cca700 !important;
  --vscode-charts-orange: #d18616 !important;

  /* Validation feedback */
  --vscode-inputValidation-infoBackground: #093053 !important;
  --vscode-inputValidation-infoBorder: #3794ff !important;
  --vscode-inputValidation-warningBackground: #3e2a00 !important;
  --vscode-inputValidation-warningBorder: #d7ba7d !important;

  /* Testing indicators */
  --vscode-testing-background: #1f361f !important;

  /* 强制深色主题标识 */
  --standalone-theme: dark !important;
}

/* === 默认深色主题（用于不支持 data-theme 的情况或系统深色模式） === */
:root {
  /* === 深色主题 === */
  --background: #1e1e1e;
  --foreground: #ffffff;
  --card: #252526;
  --card-foreground: #ffffff;
  --popover: #252526;
  --popover-foreground: #ffffff;
  --primary: #007acc;
  --primary-foreground: #ffffff;
  --secondary: #2d2d30;
  --secondary-foreground: #cccccc;
  --muted: #3e3e42;
  --muted-foreground: #9d9d9d;
  --accent: #094771;
  --accent-foreground: #ffffff;
  --destructive: #f48771;
  --destructive-foreground: #ffffff;
  --border: #3e3e42;
  --input: #3c3c3c;
  --ring: #007acc;

  /* === VS Code 兼容变量（深色） === */
  --vscode-editor-background: #1e1e1e;
  --vscode-editor-foreground: #cccccc;
  --vscode-font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  --vscode-font-size: 14px;

  /* 按钮样式 */
  --vscode-button-background: #0e639c;
  --vscode-button-foreground: #ffffff;
  --vscode-button-secondaryBackground: #3c3c3c;
  --vscode-button-secondaryForeground: #cccccc;
  --vscode-button-hoverBackground: #1177bb;

  /* 输入框样式 */
  --vscode-input-background: #3c3c3c;
  --vscode-input-foreground: #cccccc;
  --vscode-input-border: #3e3e42;

  /* 列表样式 */
  --vscode-list-hoverBackground: #2a2d2e;
  --vscode-list-hoverForeground: #cccccc;
  --vscode-list-activeSelectionBackground: #094771;
  --vscode-list-activeSelectionForeground: #ffffff;

  /* 状态颜色 */
  --vscode-errorForeground: #f48771;
  --vscode-warning-foreground: #cca700;
  --vscode-descriptionForeground: #9d9d9d;
  --vscode-disabledForeground: #6e6e6e;

  /* 其他重要颜色 */
  --vscode-focusBorder: #007fd4;
  --vscode-menu-background: #252526;
  --vscode-menu-foreground: #cccccc;
  --vscode-dropdown-background: #3c3c3c;
  --vscode-dropdown-foreground: #cccccc;
  --vscode-dropdown-border: #3e3e42;

  /* 代码块 */
  --vscode-textCodeBlock-background: #2d2d30;

  /* 图表颜色 */
  --vscode-charts-red: #f48771;
  --vscode-charts-blue: #75beff;
  --vscode-charts-green: #4ec9b0;
  --vscode-charts-yellow: #cca700;
  --vscode-charts-orange: #d18616;

  /* Validation feedback */
  --vscode-inputValidation-infoBackground: #093053;
  --vscode-inputValidation-infoBorder: #3794ff;
  --vscode-inputValidation-warningBackground: #3e2a00;
  --vscode-inputValidation-warningBorder: #d7ba7d;

  /* Testing indicators */
  --vscode-testing-background: #1f361f;

  /* 强制深色主题标识 */
  --standalone-theme: dark;
}

/* === 主题切换动画 === */
:root {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* === 滚动条样式 === */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--muted);
}

::-webkit-scrollbar-thumb {
  background: var(--muted-foreground);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--accent-foreground);
}

/* === 选择文本样式 === */
::selection {
  background: var(--primary);
  color: var(--primary-foreground);
}

/* === 焦点样式 === */
:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
}
