# 在普通消息中使用思考标签

这个功能允许您在普通消息中使用 `<思考></思考>` 或 `<thinking></thinking>` 标签来隐藏思考内容，让对话更加清晰。

## 功能特点

### ✨ **智能识别**

- 自动检测 `<思考></thinking>` 和 `<thinking></thinking>` 标签
- 支持中文和英文标签混合使用
- 正确处理嵌套和复杂的markdown内容

### 🎛️ **灵活控制**

- 默认折叠状态可通过设置控制
- 用户可手动展开/折叠思考内容
- 支持多个思考块独立控制

### 🎨 **优雅界面**

- 与现有推理块UI保持一致
- 平滑的动画效果
- 清晰的视觉指示

## 使用方法

### 基本语法

```markdown
这是普通的回复内容。

<思考>
这里是思考过程，可能包含：

- 分析用户需求
- 制定解决方案
- 评估不同选项
  </thinking>

这是继续的回复内容。
```

### 英文标签

```markdown
Here is the normal response content.

<thinking>
Here is the thinking process, which might include:
- Analyzing user requirements
- Developing solutions
- Evaluating different options
</thinking>

Here is more response content.
```

### 混合使用

```markdown
正常回复内容。

<思考>
中文思考内容
</thinking>

继续回复。

<thinking>
English thinking content
</thinking>

最后的部分。
```

## 设置选项

在UI设置中，您可以控制思考块的默认行为：

- **"默认折叠'思考'消息"**: 启用后，所有思考块默认折叠，需要用户手动展开查看

## 应用场景

### 1. 复杂问题分析

```markdown
我建议采用以下方案来解决您的问题：

<思考>
用户的问题是关于性能优化。我需要考虑：

1. 当前系统的瓶颈在哪里
2. 可能的解决方案
3. 每种方案的优缺点
4. 推荐的最优方案

经过分析，我认为主要问题是数据库查询效率...
</thinking>

首先，建议优化数据库索引...
```

### 2. 代码审查

```markdown
您的代码整体结构很好，但有几个地方可以改进：

<思考>
让我仔细分析这段代码：

1. 函数职责是否单一
2. 是否有潜在的内存泄漏
3. 错误处理是否完善
4. 性能是否有优化空间

我注意到在第15行有一个潜在的问题...
</thinking>

具体建议如下：

1. 第15行建议添加null检查
2. 第23行可以使用更高效的算法...
```

### 3. 决策说明

```markdown
基于您的需求，我推荐使用React + TypeScript的组合：

<思考>
用户需要选择技术栈，我需要考虑：

- 项目规模和复杂度
- 团队技能水平
- 维护成本
- 生态系统成熟度

对比了几种选项：

1. Vue.js: 学习曲线平缓，但大型项目维护较复杂
2. Angular: 功能强大，但学习成本高
3. React: 生态丰富，灵活性高，社区活跃
   </thinking>

这个选择的主要优势是：

1. 丰富的生态系统
2. 强大的类型支持
3. 活跃的社区
```

## 技术实现

### 前端组件

- `EnhancedMarkdownBlock`: 增强的Markdown渲染组件
- `ThinkingBlock`: 思考块UI组件
- 集成现有的 `reasoningBlockCollapsed` 设置

### 处理流程

1. 解析Markdown内容，识别思考标签
2. 将内容分割为普通文本和思考块
3. 分别渲染不同类型的内容
4. 应用折叠/展开逻辑

### 正则表达式

```javascript
;/<思考>([\s\S]*?)<\/思考>|<thinking>([\s\S]*?)<\/thinking>/gi
```

## 注意事项

1. **性能**: 大量思考块可能影响渲染性能，建议适度使用
2. **兼容性**: 确保标签正确配对，避免嵌套混乱
3. **可读性**: 思考内容应该简洁明了，避免过于冗长
4. **用户体验**: 合理使用思考块，避免过度隐藏重要信息

## 示例对比

### 使用前

```
我认为这个方案是最佳选择，因为经过详细分析，我考虑了多个因素，包括性能、可维护性、成本等，最终得出这个结论。具体来说，性能方面...
```

### 使用后

```
我认为这个方案是最佳选择。

<思考>
经过详细分析，我考虑了多个因素：
1. 性能：方案A响应时间最短
2. 可维护性：代码结构清晰
3. 成本：实施成本合理
最终得出这个结论。
</thinking>

主要原因包括性能优越、可维护性强等。
```

这样可以让用户快速得到结论，同时保留详细的思考过程供需要时查看。
